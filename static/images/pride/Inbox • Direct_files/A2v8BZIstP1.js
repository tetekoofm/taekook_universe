;/*FB_PKG_DELIM*/

__d("PolarisFeedActionLoadFeedPageExtras",["CometRelay","FBLogger","PolarisFeedLogger","PolarisFeedVariants","PolarisInstajax","PolarisLoggerUtils","PolarisQueryParams","PolarisRelayEnvironment","PolarisStoriesV3Gating","PolarisStoryAPIActions","PolarisUA","Promise","QuickPerformanceLogger","ReelTrayRefreshFalcoEvent","asyncToGeneratorRuntime","nullthrows","polarisGetXDTMaterialTray","polarisLogAction","polarisStorySelectors","polarisUserSelectors","prefetchPolarisStoriesV3Ads","qpl","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){var e=d("polarisStorySelectors").getStoriesContent(a),f=e.feedTray,g=e.traySession;e=c("nullthrows")(d("polarisUserSelectors").getViewer__DEPRECATED(a));var h=c("nullthrows")(d("polarisStorySelectors").getSeenCountInStoryTray(a)),i=c("nullthrows")(f).count()-h,j=d("polarisStorySelectors").currentFeedIsHome(a)&&c("nullthrows")(d("polarisStorySelectors").userHasReel(a,e.id));c("ReelTrayRefreshFalcoEvent").log(function(){return{has_my_reel:j?"1":"0",new_reel_count:String(i),tray_refresh_time:Number(d("PolarisLoggerUtils").msToLogSeconds(Date.now()-b)),tray_refresh_type:"network",tray_session_id:g,viewed_reel_count:String(h),was_successful:!0}})}function k(){var a=d("PolarisQueryParams").parseQueryParams();a=a.variant;return(a=c("PolarisFeedVariants").cast(String(a)))!=null?a:"home"}function a(){return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a({type:"FEED_PAGE_EXTRAS_LOADING"});var f=Date.now(),g=k();c("polarisLogAction")("loadFeedPageExtrasAttempt");(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_request");var l=new(h||(h=b("Promise")))(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){try{c("polarisLogAction")("fetchStoriesDataAttempt");var f=(yield d("PolarisStoryAPIActions").loadStoryTray(a,g));c("polarisLogAction")("fetchStoriesDataSuccess");b(f)}catch(a){c("polarisLogAction")("fetchStoriesDataFailure"),d("PolarisFeedLogger").logStoriesLoadFailure(a),e(a)}});return function(a,b){return e.apply(this,arguments)}}());try{l=(yield l);l!=null&&a(l);if(d("PolarisUA").isDesktop()&&!d("PolarisStoriesV3Gating").hasRelayStoriesTray()){var m;l=e();m=(m=(m=d("polarisStorySelectors").getFeedStoryTrayWithoutOwn(l))==null||(m=m.toArray())==null||(m=m.map(function(a){return a.userId}))==null?void 0:m.filter(Boolean))!=null?m:[];l=d("polarisStorySelectors").getStoriesContent(l).traySession;c("prefetchPolarisStoriesV3Ads")(m,l)}c("polarisLogAction")("loadFeedPageExtrasSuccess");(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_response");if(d("PolarisStoriesV3Gating").hasRelayStoriesTray())d("CometRelay").commitLocalUpdate(c("PolarisRelayEnvironment"),function(a){var b;a=c("polarisGetXDTMaterialTray")(a,g==="following");a==null||(b=a.setValue(c("uuidv4")(),"tray_session_id"))==null||(b=b.setValue(Date.now(),"refresh_key"))==null||b.setValue(Date.now()-f,"refresh_latency")});else try{c("polarisLogAction")("logReelTrayRefreshAttempt"),j(e(),f),c("polarisLogAction")("logReelTrayRefreshSuccess")}catch(a){c("polarisLogAction")("logReelTrayRefreshFailure"),d("PolarisFeedLogger").logReelTrayRefreshFailure(a)}}catch(b){c("polarisLogAction")("loadFeedPageExtrasFailure",{errorMessage:(b==null?void 0:b.name)+" "+(b==null?void 0:b.message)}),d("PolarisFeedLogger").logFeedPageExtrasLoadFailure(b),(i||(i=c("QuickPerformanceLogger"))).markerPoint(c("qpl")._(27459585,"2172"),"stories_network_response_failure"),a({type:"FEED_PAGE_EXTRAS_FAILED"}),b instanceof d("PolarisInstajax").AjaxError||c("FBLogger")("ig_web").catching(b).mustfix("unexpected")}h.resolve()});return function(b,c){return a.apply(this,arguments)}}()}g.loadFeedPageExtras=a}),98);
__d("PolarisFeedEmptySULSearchUsersQuery_instagramRelayOperation",[],(function(a,b,c,d,e,f){e.exports="24028571056765877"}),null);
__d("PolarisFeedEmptySULSearchUsersQuery$Parameters",["PolarisFeedEmptySULSearchUsersQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("PolarisFeedEmptySULSearchUsersQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__fbsearch__topsearch_connection"]},name:"PolarisFeedEmptySULSearchUsersQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("PolarisFeedTimelineRootV2Query$Parameters",["PolarisFeedTimelineRootV2Query_instagramRelayOperation","PolarisIsLoggedIn.relayprovider","PolarisShareSheetV3.relayprovider"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("PolarisFeedTimelineRootV2Query_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__feed__timeline__connection","xdt_api__v1__feed__timeline__connection"]},name:"PolarisFeedTimelineRootV2Query",operationKind:"query",text:null,providedVariables:{__relay_internal__pv__PolarisIsLoggedInrelayprovider:b("PolarisIsLoggedIn.relayprovider"),__relay_internal__pv__PolarisShareSheetV3relayprovider:b("PolarisShareSheetV3.relayprovider")}}};e.exports=a}),null);
__d("PolarisStoriesV3TrayContainerQuery$Parameters",["PolarisStoriesV3TrayContainerQuery_instagramRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("PolarisStoriesV3TrayContainerQuery_instagramRelayOperation"),metadata:{is_distillery:!0,root_field_name:["xdt_api__v1__feed__reels_tray","xdt_viewer"]},name:"PolarisStoriesV3TrayContainerQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("getPolarisFeedInitialPageSize.entrypointutils",["gkx"],(function(a,b,c,d,e,f,g){"use strict";var h=3;function a(){return c("gkx")("8953")?h:null}g.getPolarisFeedInitialPageSize=a}),98);
__d("PolarisFeedRoot.entrypoint",["JSResourceForInteraction","PolarisFeedEmptySULSearchUsersQuery$Parameters","PolarisFeedTimelineRootV2Query$Parameters","PolarisFeedVariants","PolarisStoriesV3TrayContainerQuery$Parameters","PolarisSuggestedUserListQuery$Parameters","getPolarisFeedInitialPageSize.entrypointutils","gkx"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){var b=a.routeParams;a=a.routeProps;var e=c("PolarisFeedVariants").cast(b.variant),f=e!=null&&e!=="home"?{pagination_source:String(e)}:{};b={polarisFeedTimelineQuery:{environmentProviderOptions:{preloaderGroup:"ig_web_feed"},options:{},parameters:c("PolarisFeedTimelineRootV2Query$Parameters"),variables:{data:babelHelpers["extends"]({},f,{device_id:a.device_id,is_async_ads_double_request:"0",is_async_ads_in_headload_enabled:"0",is_async_ads_rti:"0",rti_delivery_backend:"0"}),first:d("getPolarisFeedInitialPageSize.entrypointutils").getPolarisFeedInitialPageSize(),pass_prefetch_pagination_gk:c("gkx")("4142"),variant:(f=b.variant)!=null?f:String("home")}}};(c("gkx")("25302")||a.enable_mobile_suggested_user_cta)&&(b=babelHelpers["extends"]({},b,{polarisSuggestedUserListQuery:{options:{},parameters:c("PolarisSuggestedUserListQuery$Parameters"),variables:{data:{max_id:"",max_number_to_display:5,module:"discover_people",paginate:!0}}}}));(c("gkx")("7201")||a.enable_mobile_suggested_user_cta)&&(b=babelHelpers["extends"]({},b,{polarisPolarisFeedEmptySULSearchQueryRef:{parameters:c("PolarisFeedEmptySULSearchUsersQuery$Parameters"),variables:{query:""}}}));f=e==null||e==="home";f=f||e==="following"&&c("gkx")("1551")===!0;f=f&&c("gkx")("4559");f&&(b=babelHelpers["extends"]({},b,{storiesTrayQuery:{options:{},parameters:c("PolarisStoriesV3TrayContainerQuery$Parameters"),variables:{data:{is_following_feed:e==="following"}}}}));return{queries:b}},root:c("JSResourceForInteraction")("PolarisFeedRoot.react").__setRef("PolarisFeedRoot.entrypoint")};g["default"]=a}),98);
__d("getViewportDimensions",["UserAgent"],(function(a,b,c,d,e,f,g){"use strict";var h=function(){var a=null;return function(){var b=document.body;if(b==null)return null;(a==null||!b.contains(a))&&(a=document.createElement("div"),a.style.left=Number.MAX_SAFE_INTEGER+"px",a.style.width="100%",a.style.height="100%",a.style.position="fixed",b.appendChild(a));return a}}();function i(){var a;document.documentElement&&(a=document.documentElement.clientWidth);a==null&&document.body&&(a=document.body.clientWidth);return a||0}function j(){var a;document.documentElement&&(a=document.documentElement.clientHeight);a==null&&document.body&&(a=document.body.clientHeight);return a||0}function k(){return{width:window.innerWidth||i(),height:window.innerHeight||j()}}k.withoutScrollbars=function(){return c("UserAgent").isPlatform("Android")?k():{width:i(),height:j()}};k.layout=function(){var a,b=h();return{width:(a=b==null?void 0:b.clientWidth)!=null?a:i(),height:(a=b==null?void 0:b.clientHeight)!=null?a:j()}};g["default"]=k}),98);